function showSuccess(a){var b="操作成功",c=function(){var a='<div id="dialog-success" class="hide"><div class="alert alert-info bigger-110">'+b+"</div>"+'<div class="space-6"></div>'+"</div>";return 1==$("#dialog-success").length?($("#dialog-success div.alert-info").text(b),!0):($("body").append(a),!0)};c()?$("#dialog-success").removeClass("hide").dialog({resizable:!1,modal:!0,title:"<div class='widget-header widget-header-small'><h4 class='smaller'><i class='ace-icon fa fa-exclamation-triangle green'></i>提示</h4></div>",title_html:!0,buttons:[{html:"<i class='ace-icon fa fa-trash-o bigger-110'></i>&nbsp; 确定","class":"btn btn-success btn-xs",click:function(){$(this).dialog("close"),a&&a(this)}}]}):window._originalConfirm(b)&&a&&a()}function upload(a,b){return""==$("#"+a).val()?(alert("请选择一个文件"),void 0):($.ajaxFileUpload({url:b,secureuri:!1,type:"POST",fileElementId:a,dataType:"json",success:function(b){if(b&&"SUCCESS"==b.result){var c=$('input[name="'+a+'"]');c.val(b.fileUrl),$(".ace-file-name",c.parent()).attr("data-title",b.fileUrl),$("#"+a+"view").attr("src",b.fileUrl).show()}else console.log(b),alert("上传失败")}}),void 0)}function changeFileName(a){var d,b=$("#"+a),c=b.val();isEmpty(c)||(d=b.parent(),$(".ace-file-name",d).attr("data-title",c.substr(c.lastIndexOf("\\")+1)),$("a",d).attr("style","display: inline;"),$(".ace-file-container",d).addClass("selected"),$(".ace-file-container",d).attr("data-title","重新选择"))}function bindFileRemove(a){$("a",$("#"+a).parent()).click(function(){$(this).hasClass("remove")&&($(this).hide(),$("input[name='"+a+"']").val(""),$("#"+a+"view").removeAttr("src").hide())})}function post(a,b,c){$.ajax({url:a,type:"POST",dataType:"json",contentType:"application/json;charset=UTF-8",data:b}).done(function(a){c&&c(a)})}function initBtn(a,b){$("#addBtn").on("click",function(){$("#addBtn").attr("disabled","disabled"),setBreadcrumb(a+"/preview",$(this).text()),openPage(a+"/toAdd")}),$("#editBtn").on("click",function(){var b=getSelectedIds();1!=b.length?alert("请选择一条记录"):($("#editBtn").attr("disabled","disabled"),setBreadcrumb(a+"/preview",$(this).text()),openPage(a+"/toEdit/"+b[0].id))}),$("#delBtn").on("click",function(){var c=getSelectedIds();return 0==c.length?(alert("请选择一条记录"),void 0):(data=JSON.stringify(c),window.confirm("是否确认删除此信息?",function(c){post(a+"/deleteByIds",data,function(a){a.result&&($(c).dialog("close"),alert("操作成功")),b&&b.ajax.reload()})}),void 0)}),$("#viewBtn").on("click",function(){var b=getSelectedIds();1!=b.length?alert("请选择一条记录"):($("#viewBtn").attr("disabled","disabled"),setBreadcrumb(a+"/preview",$(this).text()),openPage(a+"/view/"+b[0].id))})}function cancelBtn(a){$("#cancel").on("click",function(){backBreadcrumb(),openPage(a+"/preview")})}function getSelectedIds(){var a=[];return $("table input:checkbox").each(function(){if($(this).prop("checked")&&!isEmpty($(this).attr("id"))){var b={};b.id=$(this).attr("id"),a.push(b)}}),a}function setBreadcrumb(a,b){var c,d;b||(b=""),c=getBreadcrumb(),c.reverse(),d=c[c.length-1],d["data-action"]=a,c[c.length-1]=d,c.push({text:b}),c.reverse(),refreshBreadcrumb(c)}function backBreadcrumb(){var a=getBreadcrumb();a.reverse(),a.pop(),a.reverse(),refreshBreadcrumb(a)}function openPage(a,b){$("div").find(".page-content").load(a,function(){b&&b()})}function loadSelectRemoteData(a,b){$.post(b,function(b){var e,c=$("#"+a),d=c.attr("datakey");d||(d="key"),e=c.attr("datavalue"),e||(e="value"),$.each(b,function(a,b){c.append("<option value='"+b[d]+"'>"+b[e]+"</option> ")})})}function loadSelectData(a,b,c,d){var e,f,g;if(b){e=$("#"+a),d||e.append('<option value="">--请选择--</option>');for(f in b)g="<option value='"+f+"'",c&&c==f&&(g+=" selected='selected'"),g+=">"+b[f]+"</option>",e.append(g)}}function formateValue(a,b){var c=$("#"+a),d=c.text().trim();c.text(b[d])}function formatDate(a){return new Date(a).pattern("yyyy-MM-dd")}function formatDatetime(a){return new Date(a).pattern("yyyy-MM-dd HH:mm:ss")}function isEmpty(a){return"undefined"==typeof a||""==a||$.isEmptyObject(a)?!0:!1}$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(a){var b=this.options.title||"&nbsp;";"title_html"in this.options&&1==this.options.title_html?a.html(b):a.text(b)}})),Date.prototype.pattern=function(a){var d,b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":0==this.getHours()%12?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},c={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(a)&&(a=a.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+c[this.getDay()+""]));for(d in b)new RegExp("("+d+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[d]:("00"+b[d]).substr((""+b[d]).length)));return a},window._originalAlert=window.alert,window.alert=function(a,b){var c=function(){var b='<div id="dialog-message" class="hide"><div class="alert alert-info bigger-110">'+a+"</div>"+"</div>";return 1==$("#dialog-message").length?($("#dialog-message div.alert-info").text(a),!0):($("body").append(b),!0)};c()?$("#dialog-message").removeClass("hide").dialog({modal:!0,title:"<div class='widget-header widget-header-small'><h4 class='smaller'><i class='ace-icon fa fa-exclamation-triangle green'></i>提示</h4></div>",title_html:!0,buttons:[{text:"OK","class":"btn btn-success btn-xs",click:function(){b&&b(),$(this).dialog("close")}}]}):(console.log("bootstrap was not found"),window._originalAlert(a))},window._originalConfirm=window.confirm,window.confirm=function(a,b){var c=function(){var b='<div id="dialog-confirm" class="hide"><div class="alert alert-warning bigger-110">'+a+"</div>"+'<div class="space-6"></div>'+"</div>";return 1==$("#dialog-confirm").length?($("#dialog-confirm div.alert-warning").text(a),!0):($("body").append(b),!0)};c()?$("#dialog-confirm").removeClass("hide").dialog({resizable:!1,modal:!0,title:"<div class='widget-header'><h4 class='smaller'><i class='ace-icon fa fa-exclamation-triangle red'></i> 是否操作? </h4></div>",title_html:!0,buttons:[{html:"<i class='ace-icon fa fa-trash-o bigger-110'></i>&nbsp; 确定","class":"btn btn-danger btn-xs",click:function(){b(this)}},{html:"<i class='ace-icon fa fa-times bigger-110'></i>&nbsp; 取消","class":"btn btn-xs",click:function(){$(this).dialog("close")}}]}):window._originalConfirm(a)};